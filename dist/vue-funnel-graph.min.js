var VueFunnelGraph=function(e,t,a,n,s,i){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=r(a),o=r(n),u={name:"VueFunnelGraph",props:{animated:{type:Boolean,default:!1},width:[String,Number],height:[String,Number],values:Array,labels:Array,colors:{type:Array,default:function(){return[]}},subLabels:Array,subLabelValue:{type:String,default:"percent"},direction:{type:String,default:"horizontal"},gradientDirection:{type:String,default:"horizontal"},displayPercentage:{type:Boolean,default:!0}},data:function(){return{paths:[],prevPaths:[],graph:null,tween:null,defaultColors:i.getDefaultColors(10)}},computed:{valuesFormatted:function(){return this.graph.is2d()?this.graph.getValues2d().map((function(e){return s.formatNumber(e)})):this.values.map((function(e){return s.formatNumber(e)}))},colorSet:function(){for(var e=[],t=0,a=0;a<this.paths.length;a++){var n=this.graph.is2d()?this.getColors[a]:this.getColors,s="string"==typeof n||1===n.length?"solid":"gradient";"gradient"===s&&(t+=1),e.push({values:n,fillMode:s,fill:"solid"===s?n:"url('#funnelGradient-"+t+"')"})}return e},gradientSet:function(){var e=[];return this.colorSet.forEach((function(t){"gradient"===t.fillMode&&e.push(t)})),e},getColors:function(){return this.colors instanceof Array&&0===this.colors.length?i.getDefaultColors(this.is2d()?this.values[0].length:2):this.colors.length<this.paths.length?[].concat(this.colors).concat([].concat(this.defaultColors).splice(this.paths.length,this.paths.length-this.colors.length)):this.colors},gradientAngle:function(){return"rotate("+("vertical"===this.gradientDirection?90:0)+")"}},methods:{enterTransition:function(e,t){this.animated||t(),setTimeout((function(){return t()}),700)},leaveTransition:function(e,t){this.animated||t(),setTimeout((function(){return t()}),700)},is2d:function(){return this.graph.is2d()},percentages:function(){return this.graph.createPercentages()},twoDimPercentages:function(){return this.is2d()?this.graph.getPercentages2d():[]},subLabelBackgrounds:function(e){return this.is2d()?i.generateLegendBackground(this.getColors[e],this.gradientDirection):[]},offsetColor:function(e,t){return Math.round(100*e/(t-1))+"%"},makeAnimations:function(){var e=this;null!==this.tween&&this.tween.stop();var a=[],n=this.prevPaths.length!==this.paths.length,s={x:.5,y:.5};n&&(s={x:0,y:.5},this.graph.isVertical()&&(s={x:1,y:1}),this.graph.is2d()||(s={x:0,y:1})),this.paths.forEach((function(i,r){var l=e.prevPaths[r]||e.graph.getPathMedian(r);n&&(l=e.graph.getPathMedian(r));var o=t.interpolate([l,i],{addPoints:1,origin:s,optimize:"fill",precision:1});a.push(o)}));var i={value:0};this.tween=new l.default.Tween(i).to({value:1},700).easing(l.default.Easing.Cubic.InOut).onUpdate((function(){for(var t=0;t<e.paths.length;t++)e.$set(e.paths,t,a[t](i.value))})),this.tween.start(),function e(){l.default.update()&&requestAnimationFrame(e)}()},drawPaths:function(){var e=this;this.prevPaths=this.paths,this.paths=[],this.graph.getPathDefinitions().forEach((function(t){e.paths.push(t)}))}},created:function(){this.graph=new o.default({height:this.height,width:this.width,direction:this.direction,data:{labels:this.labels,values:this.values}}),this.drawPaths(),this.animated&&this.makeAnimations()},watch:{values:function(){this.graph.setValues(this.values),this.drawPaths(),this.animated&&this.makeAnimations()},direction:function(){this.graph.setDirection(this.direction).setWidth(this.width).setHeight(this.height),this.drawPaths()}},filters:{format:function(e){return s.formatNumber(e)}}};var d=function(e,t,a,n,s,i,r,l,o,u){"boolean"!=typeof r&&(o=l,l=r,r=!1);var d,h="function"==typeof a?a.options:a;if(e&&e.render&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0,s&&(h.functional=!0)),n&&(h._scopeId=n),i?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,o(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},h._ssrRegister=d):t&&(d=r?function(){t.call(this,u(this.$root.$options.shadowRoot))}:function(e){t.call(this,l(e))}),d)if(h.functional){var c=h.render;h.render=function(e,t){return d.call(t),c(e,t)}}else{var f=h.beforeCreate;h.beforeCreate=f?[].concat(f,d):[d]}return a},h="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var c=document.head||document.getElementsByTagName("head")[0],f={};var p=d({render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"funnel svg-funnel-js",class:{"svg-funnel-js--vertical":"vertical"===e.direction}},[a("div",{staticClass:"svg-funnel-js__container"},[a("svg",{attrs:{width:e.width,height:e.height}},[a("defs",e._l(e.gradientSet,(function(t,n){return a("linearGradient",{key:n,attrs:{id:"funnelGradient-"+(n+1),gradientTransform:e.gradientAngle}},e._l(t.values,(function(n,s){return a("stop",{key:s,attrs:{"stop-color":n,offset:e.offsetColor(s,t.values.length)}})})),1)})),1),e._v(" "),e._l(e.paths,(function(t,n){return a("path",{key:n,attrs:{fill:e.colorSet[n].fill,stroke:e.colorSet[n].fill,d:t}})}))],2)]),e._v(" "),a("transition-group",{staticClass:"svg-funnel-js__labels",attrs:{name:"appear",tag:"div"},on:{enter:e.enterTransition,leave:e.leaveTransition}},e._l(e.valuesFormatted,(function(t,n){return a("div",{key:e.labels[n].toLowerCase().split(" ").join("-"),staticClass:"svg-funnel-js__label",class:"label-"+(n+1)},[a("div",{staticClass:"label__value"},[e._v(e._s(t))]),e._v(" "),e.labels?a("div",{staticClass:"label__title"},[e._v(e._s(e.labels[n]))]):e._e(),e._v(" "),e.displayPercentage&&100!==e.percentages()[n]?a("div",{staticClass:"label__percentage"},[e._v("\n        "+e._s(e.percentages()[n])+"%\n      ")]):e._e(),e._v(" "),e.is2d()?a("div",{staticClass:"label__segment-percentages"},[a("ul",{staticClass:"segment-percentage__list"},e._l(e.subLabels,(function(t,s){return a("li",{key:s},[e._v("\n            "+e._s(t)+":\n            "),"percent"===e.subLabelValue?a("span",{staticClass:"percentage__list-label"},[e._v(e._s(e.twoDimPercentages()[n][s])+"%")]):a("span",{staticClass:"percentage__list-label"},[e._v(e._s(e._f("format")(e.values[n][s])))])])})),0)]):e._e()])})),0),e._v(" "),a("transition",{attrs:{name:"fade"},on:{enter:e.enterTransition,leave:e.leaveTransition}},[e.is2d()?a("div",{staticClass:"svg-funnel-js__subLabels"},e._l(e.subLabels,(function(t,n){return a("div",{key:n,class:"svg-funnel-js__subLabel svg-funnel-js__subLabel-"+(n+1)},[a("div",{staticClass:"svg-funnel-js__subLabel--color",style:e.subLabelBackgrounds(n)}),e._v(" "),a("div",{staticClass:"svg-funnel-js__subLabel--title"},[e._v(e._s(t))])])})),0):e._e()])],1)},staticRenderFns:[]},(function(e){e&&e("data-v-ae67d288_0",{source:".appear-enter-active[data-v-ae67d288],.appear-leave-active[data-v-ae67d288]{transition:all .7s ease-in-out}.appear-enter-to[data-v-ae67d288],.appear-leave[data-v-ae67d288]{max-width:100%;max-height:100%;opacity:1}.appear-enter[data-v-ae67d288],.appear-leave-to[data-v-ae67d288]{max-width:0;max-height:0;opacity:0}.fade-enter-active[data-v-ae67d288],.fade-leave-active[data-v-ae67d288]{transition:all .3s ease}.fade-enter-to[data-v-ae67d288],.fade-leave[data-v-ae67d288]{opacity:1}.fade-enter[data-v-ae67d288],.fade-leave-to[data-v-ae67d288]{opacity:0}",map:void 0,media:void 0})}),u,"data-v-ae67d288",false,undefined,!1,(function(e){return function(e,t){return function(e,t){var a=h?t.media||"default":e,n=f[a]||(f[a]={ids:new Set,styles:[]});if(!n.ids.has(e)){n.ids.add(e);var s=t.source;if(t.map&&(s+="\n/*# sourceURL="+t.map.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",t.media&&n.element.setAttribute("media",t.media),c.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(s),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{var i=n.ids.size-1,r=document.createTextNode(s),l=n.element.childNodes;l[i]&&n.element.removeChild(l[i]),l.length?n.element.insertBefore(r,l[i]):n.element.appendChild(r)}}}(e,t)}}),void 0,void 0),v=Object.freeze({__proto__:null,VueFunnelGraph:p});var g={install:function e(t){e.installed||(e.installed=!0,Object.keys(v).forEach((function(e){t.component(e,v[e])})))}},_=null;return"undefined"!=typeof window?_=window.Vue:"undefined"!=typeof global&&(_=global.Vue),_&&_.use(g),e.VueFunnelGraph=p,e.default=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({},interpolate,TWEEN,FunnelGraph,formatNumber,getDefaultColors);
