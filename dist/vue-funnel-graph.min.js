var VueFunnelGraph=function(e,t,n,a,l,r,i,s,o){"use strict";function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=c(n),h=c(a),d={name:"VueFunnelGraph",props:{animated:{type:Boolean,default:!1},width:[String,Number],height:[String,Number],values:Array,labels:Array,colors:{type:Array,default:function(){return[]}},subLabels:Array,subLabelValue:{type:String,default:"percent"},direction:{type:String,default:"horizontal"},gradientDirection:{type:String,default:"horizontal"},displayPercentage:{type:Boolean,default:!0}},data:function(){return{paths:[],prevPaths:[],graph:null,tween:null,defaultColors:r.getDefaultColors(10)}},computed:{valuesFormatted:function(){return this.graph.is2d()?this.graph.getValues2d().map((function(e){return l.formatNumber(e)})):this.values.map((function(e){return l.formatNumber(e)}))},colorSet:function(){for(var e=[],t=0,n=0;n<this.paths.length;n++){var a=this.graph.is2d()?this.getColors[n]:this.getColors,l="string"==typeof a||1===a.length?"solid":"gradient";"gradient"===l&&(t+=1),e.push({values:a,fillMode:l,fill:"solid"===l?a:"url('#funnelGradient-"+t+"')"})}return e},gradientSet:function(){var e=[];return this.colorSet.forEach((function(t){"gradient"===t.fillMode&&e.push(t)})),e},getColors:function(){return this.colors instanceof Array&&0===this.colors.length?r.getDefaultColors(this.is2d()?this.values[0].length:2):this.colors.length<this.paths.length?[].concat(this.colors).concat([].concat(this.defaultColors).splice(this.paths.length,this.paths.length-this.colors.length)):this.colors},gradientAngle:function(){return"rotate("+("vertical"===this.gradientDirection?90:0)+")"}},methods:{enterTransition:function(e,t){this.animated||t(),setTimeout((function(){return t()}),700)},leaveTransition:function(e,t){this.animated||t(),setTimeout((function(){return t()}),700)},is2d:function(){return this.graph.is2d()},percentages:function(){return this.graph.createPercentages()},twoDimPercentages:function(){return this.is2d()?this.graph.getPercentages2d():[]},subLabelBackgrounds:function(e){return this.is2d()?r.generateLegendBackground(this.getColors[e],this.gradientDirection):[]},offsetColor:function(e,t){return Math.round(100*e/(t-1))+"%"},makeAnimations:function(){var e=this;null!==this.tween&&this.tween.stop();var n=[],a=this.prevPaths.length!==this.paths.length,l={x:.5,y:.5};a&&(l={x:0,y:.5},this.graph.isVertical()&&(l={x:1,y:1}),this.graph.is2d()||(l={x:0,y:1})),this.paths.forEach((function(r,i){var s=e.prevPaths[i]||e.graph.getPathMedian(i);a&&(s=e.graph.getPathMedian(i));var o=t.interpolate([s,r],{addPoints:1,origin:l,optimize:"fill",precision:1});n.push(o)}));var r={value:0};this.tween=new u.default.Tween(r).to({value:1},700).easing(u.default.Easing.Cubic.InOut).onUpdate((function(){for(var t=0;t<e.paths.length;t++)e.$set(e.paths,t,n[t](r.value))})),this.tween.start(),function e(){u.default.update()&&requestAnimationFrame(e)}()},drawPaths:function(){var e=this;this.prevPaths=this.paths,this.paths=[],this.graph.getPathDefinitions().forEach((function(t){e.paths.push(t)}))}},created:function(){this.graph=new h.default({height:this.height,width:this.width,direction:this.direction,data:{labels:this.labels,values:this.values}}),this.drawPaths(),this.animated&&this.makeAnimations()},watch:{values:function(){this.graph.setValues(this.values),this.drawPaths(),this.animated&&this.makeAnimations()},direction:function(){this.graph.setDirection(this.direction).setWidth(this.width).setHeight(this.height),this.drawPaths()}},filters:{format:function(e){return l.formatNumber(e)}}},f={class:"svg-funnel-js__container"},g=["width","height"],p=["id","gradientTransform"],m=["stop-color","offset"],v=["fill","stroke","d"],k={class:"label__value"},b={key:0,class:"label__title"},B={key:1,class:"label__percentage"},y={key:2,class:"label__segment-percentages"},_={class:"segment-percentage__list"},E={key:0,class:"percentage__list-label"},w={key:1,class:"percentage__list-label"},L={key:0,class:"svg-funnel-js__subLabels"},V={class:"svg-funnel-js__subLabel--title"};d.render=function(e,t,n,a,l,r){return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(["funnel svg-funnel-js",{"svg-funnel-js--vertical":"vertical"===n.direction}])},[o.createElementVNode("div",f,[(o.openBlock(),o.createElementBlock("svg",{width:n.width,height:n.height},[o.createElementVNode("defs",null,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(r.gradientSet,(function(e,t){return o.openBlock(),o.createElementBlock("linearGradient",{id:"funnelGradient-"+(t+1),key:t,gradientTransform:r.gradientAngle},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.values,(function(t,n){return o.openBlock(),o.createElementBlock("stop",{"stop-color":t,offset:r.offsetColor(n,e.values.length),key:n},null,8,m)})),128))],8,p)})),128))]),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(l.paths,(function(e,t){return o.openBlock(),o.createElementBlock("path",{fill:r.colorSet[t].fill,stroke:r.colorSet[t].fill,d:e,key:t},null,8,v)})),128))],8,g))]),o.createVNode(o.TransitionGroup,{class:"svg-funnel-js__labels",name:"appear",tag:"div",onEnter:r.enterTransition,onLeave:r.leaveTransition},{default:o.withCtx((function(){return[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(r.valuesFormatted,(function(t,a){return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(["svg-funnel-js__label","label-"+(a+1)]),key:n.labels[a].toLowerCase().split(" ").join("-")},[o.createElementVNode("div",k,o.toDisplayString(t),1),n.labels?(o.openBlock(),o.createElementBlock("div",b,o.toDisplayString(n.labels[a]),1)):o.createCommentVNode("",!0),n.displayPercentage&&100!==r.percentages()[a]?(o.openBlock(),o.createElementBlock("div",B,o.toDisplayString(r.percentages()[a])+"% ",1)):o.createCommentVNode("",!0),r.is2d()?(o.openBlock(),o.createElementBlock("div",y,[o.createElementVNode("ul",_,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(n.subLabels,(function(t,l){return o.openBlock(),o.createElementBlock("li",{key:l},[o.createTextVNode(o.toDisplayString(t)+": ",1),"percent"===n.subLabelValue?(o.openBlock(),o.createElementBlock("span",E,o.toDisplayString(r.twoDimPercentages()[a][l])+"%",1)):(o.openBlock(),o.createElementBlock("span",w,o.toDisplayString(n.values[a][l]|e.format),1))])})),128))])])):o.createCommentVNode("",!0)],2)})),128))]})),_:1},8,["onEnter","onLeave"]),o.createVNode(o.Transition,{name:"fade",onEnter:r.enterTransition,onLeave:r.leaveTransition},{default:o.withCtx((function(){return[r.is2d()?(o.openBlock(),o.createElementBlock("div",L,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(n.subLabels,(function(e,t){return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass("svg-funnel-js__subLabel svg-funnel-js__subLabel-"+(t+1)),key:t},[o.createElementVNode("div",{class:"svg-funnel-js__subLabel--color",style:o.normalizeStyle(r.subLabelBackgrounds(t))},null,4),o.createElementVNode("div",V,o.toDisplayString(e),1)],2)})),128))])):o.createCommentVNode("",!0)]})),_:1},8,["onEnter","onLeave"])],2)},d.__scopeId="data-v-113d5ff4";var C=Object.freeze({__proto__:null,VueFunnelGraph:d});var N={install:function e(t){e.installed||(e.installed=!0,Object.keys(C).forEach((function(e){t.component(e,C[e])})))}},P=null;return"undefined"!=typeof window?P=window.Vue:"undefined"!=typeof global&&(P=global.Vue),P&&P.use(N),e.VueFunnelGraph=d,e.default=N,Object.defineProperty(e,"__esModule",{value:!0}),e}({},interpolate,TWEEN,FunnelGraph,formatNumber,getDefaultColors,0,0,vue);
